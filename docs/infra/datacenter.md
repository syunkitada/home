# Datacenter


## 用語メモ
* エリア・リージョン・アベイラビリティゾーン
    * エリア
        * 広いインフラのデータ管理
            * 東日本エリア、西日本エリア、など
        * エリアごとにインターネットゲートウェイが分離しており、エリア間でシステムを冗長化させたり、バックアップを授けることで、ディザスタリカバリ(DR)が実現できる
    * リージョン
        * エリアに属する地域・データセンタのくくり
            * 東日本エリアの石狩、東日本エリアの東京、西日本エリアの大阪、など
    * アベイラビリティゾーン
        * リージョンに属するラックや電源系統などのくくり
        * 電源系統を考慮してシステムを冗長化する場合に意識する
* UPS(Uninterruptible Power Supply)
    * 無停電電源装置
    * 充電して繰り返し利用できる二次電池などを用いて電力を溜めておく装置
    * メインの電源が何らかの事故で電力供給を受けられない場合に、一定時間にわたって一定の出力で電力供給を行う
    * 対応可能な停電時間は数分から30分程度で、長時間の停電に対応するため発電機などを併用している
        * メインの電源が落ちたときは、UPSで一時的電力供給をし、その間(数分程度)に発電機を稼働させて発電機から電力供給を行う
        * データセンタには、発電機用の燃料がある程度蓄えられてるが、停電時には近場から燃料を供給してもらえるようにしている
    * また、電源を冗長化させるため電力事業者から複数の回線を引くのが一般的
    * 事例
        * 2018年9月6日の北海道地震においての石狩データセンター
            * https://www.publickey1.jp/blog/18/post_271.html
            * 地震の影響で北海道電力からの電力供給がなくなり、UPSおよびディーゼル発電機により60時間近く稼働を続けた
            * 石狩データセンターにはV12の1MWが6機、V16の1.5MWが5機の、計11機のディーゼルエンジンがあり、13.5MWの容量がある
            * 備蓄燃料は70時間程度あり、節電運転する事で100時間程度が無給油で出来る状態にあった
            * 燃料は重油を使っており、タンクローリーによってデータセンターへ運ばれ、データセンター内のタンクに備蓄される
* PDU(Power Distribution Unit)
    * PDUはUPSに接続されており、ラックごとに設置され、そのラック内の機器に電力供給を行う
    * 電源を冗長化するため、複数の電力事業者から回線を引き、それぞれでUPSを用意して、PDUで各ラックに電力供給を行う
    * PDUごとにブレーカがあり、過電流が起こるとそのPDU単位でブレーカトリップする
    * システム構築者は各ラックに来ている電源系統を分散させるようにサーバを配置することで、電源の冗長性を得ることができる
    * また機器によっては2系統のPDUから電力供給を受けることで、その機器自体で電源の冗長性を得る
* エアーフロー


## OSSのデータセンター管理ツール
* openDCIM
    * https://www.opendcim.org/
    * デモサイト: https://www.opendcim.org/demo/index.php
        * dcim
        * dcim
* rackTables
    * https://www.racktables.org/
    * デモサイト: http://demo.racktables.org/index.php?page=index&tab=default
        * admin:admin
* netbox
    * https://netbox.readthedocs.io/en/stable/


## ベアメタルプロビジョニングツール
* RackHD
    * EMCがOSSで公開しているベアメタルプロビジョニングツール
